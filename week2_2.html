<html>
	<head>
		<meta charset="utf-8">
		<title>playstore</title>
		<link rel="stylesheet" text="text/css" media="(min-width:580px)"href="week3.css"/>
		<link rel="stylesheet" text="text/css" media="(max-width:579px) " href="week4.css"/>

	</head>
	<body>
		<div class="wrap">
			<header>
				<div class="right" >
					<span class="mobile"></span>
					
					<div class="id">
						<a href="https://plus.google.com/u/0/?tab=8X">+lee</a>
					</div>
					<ul class="icon">
						<li >
							<a href="" class= "a1" ><span class="blind">app</span></a>
							<!--<div class="onApp">
								<ul>
									<li><a href="" class="a11"><span>+lee</span></a></li>
									<li><a href="" class="a12"><span>+lee</span></a></li>
									<li><a href="" class="a13"><span>+lee</span></a></li>
									<li><a href="" class="a21"><span>+lee</span></a></li>
									<li><a href="" class="a22"><span>+lee</span></a></li>
									<li><a href="" class="a23"><span>+lee</span></a></li>
									<li><a href="" class="a31"><span>+lee</span></a></li>
									<li><a href="" class="a32"><span>+lee</span></a></li>
									<li><a href="" class="a33"><span>+lee</span></a></li>

								</ul>
								<a href="">
									
								</a>
							</div>-->
						</li>
						<li >
							<a href="" class="a2"><span class="blind">alarm</span></a>
							</li>
						<li class="spot">
							<a href="" class="a3" >공유</a>
							</li>
						<li>
							<a href="" class="a4"><span class="blind">me</span></a>
							</li>
					</ul>
				</div>
				<div class="left">
					<span class="mobile"></span>
				
					<a href="https://play.google.com/store">
						<span></span>	
					</a>
				</div>
				<div class="middle">
					<a href="" class="mobile"></a>
					<div class="mobile">
						<span></span>
					</div>
					<fieldset>
						
						<input type="text" name="Search" value placeholder="검색" >
						
						<button type="button" onclick="alert('hello')"><span>
						</span></button>
					</fieldset>	
				</div>
			</header>
			<section>
				<aside>
					<span class="left">	
						<span class="arrow"></span>
					</span>
					<div class="right">
						<a href="" >
							<span class="main">
								<span class="s1"></span>
								<span class="s2">도서</span>
							</span>
						</a>
						<ul class="menu">
							<li><a href="" class="a1">내 책</a></li>
							<li><a href="" class="a2">쇼핑하기</a></li>
						</ul>
						
					</div>
				</aside>

				<nav>
					<div>
						<ul class="mobile">
							<li> <a href="" class="mobile"> 내 책</a> </li>
							<li> <a href="" class="mobile"> 신규 출시</a> </li>
							<li> <a href="" class="mobile"> 인기 차트</a> </li>
						</ul>

						<div class="right">
							<button class="b1">
								<span></span>
							</button >
							<button class="b2">
								<span></span>
							</button>
						</div>

						<ul class="left">
							<li class="NavTitle">
								<button class="bNavTitle" id='buttonOnNavTitle'>
									<span class="s1" >장르</span>
									<span class="s2"></span>
								</button>
								<div id="onNavTitle">
									<ul >
										<li id="Navl1">가족/관계</li>
										<li id="Navl2">건강/웰빙</li>
										<li id="Navl3">경영/경제</li>
										<li id="Navl4">과학/수학</li>
										<li>만화</li>
										<li>소설/문학</li>
										<li>어린이</li>
										<li>여행</li>
										<li>역사</li>
										<li>이것저것</li>
										<li>하늘</li>
										<li>해님</li>
										<li>달님</li>	
									</ul>
								</div>	
							</li>
							<div></div>
							<li class="line"><a href="" class="a1">
								홈
							</a></li>
							<li><a href="" class="a2">
								인기차트
							</a></li>
							<li><a href="" class="a3">
								신간
							</a></li>
						</ul>
					</div>
				</nav>
				<article>
					<div class="loading" id="loading">
						<div></div>
					</div>
					<ul id="bookSelf">
						<li class="l1" id="line1">
							<h1>
								<a href="" class="a1">주간 베스트</a>
								<a href="" class="a2">한 주 동안 가장 많은 사랑을 받은 도서</a>
								<a class="a3" id="moreButton1">더보기</a> 
							</h1>	
							<ul class="books" id="books1">
								<li id="books1_1">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/VvCTIS-i28IC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>

								<li id="books1_2">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/VvCTIS-i28IC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
								<li id="books1_3">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/VvCTIS-i28IC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
								<li id="books1_4">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/VvCTIS-i28IC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
								<li id="books1_5">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/VvCTIS-i28IC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
								<li id="books1_6">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								
								<li id="books1_7">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
							</ul>
						</li>
						<li class="l2">
							<h1>
								<a href="" class="a1">주간 베스트</a>
								<a href="" class="a2">한 주 동안 가장 많은 사랑을 받은 도서</a>
								<a href="" class="a3">더보기</a> 
							</h1>	
							<ul class="books ">
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
							</ul>
						</li>
						<li class="l3">
							<h1>
								<a href="" class="a1">주간 베스트</a>
								<a href="" class="a2">한 주 동안 가장 많은 사랑을 받은 도서</a>
								<a href="" class="a3">더보기</a> 
							</h1>	
							<ul class="books">
								<li id="books1_1">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li id="books1_2">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li id="books1_3">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li id="books1_3">
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
							</ul>
						</li>
						<li class="l4">
							<h1>
								<a href="" class="a1">주간 베스트</a>
								<a href="" class="a2">한 주 동안 가장 많은 사랑을 받은 도서</a>
								<a href="" class="a3">더보기</a> 
							</h1>	
							<ul class="books">
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>								</li>
								<li>
									<div class="up">
										<a href="" class="black"></a>
										<div>
											<img src="https://encrypted.google.com/books/images/frontcover/w5ovsKXL0IQC?fife=w170-rw" alt="">
										</div>
									</div>
									
									<div class="down">
											<h2><a href=""class="line">
												어서와 연애는 처음이지?
											</a></h2>
											<span>
												<a href="" class="left line">장해정</a>
												<a href=""  class="right line">₩980</a>	
											</span>
										
									</div>				
								</li>
							</ul>
						</li>
					</ul>
				</article>
			</section>
			<footer>
					<div class="up">
						<span>©2014 erin314 </span>
						<a href="">사이트 서비스 약관</a>
						<a href="">기기 판매 약관</a>
						<a href="">개인정보 취급 방침</a>
						<a href="">개발자</a>
					</div>

					<div class="down">
						상호명: erinlee.inc.|대표자: 이경륜	|주소:경기도 안양시 동안구|대표전화: 031-449-6449|<a href="">도움말</a>|이메일<a href="">erin314@naver.com</a>	
						<br>
						플레이 스토어에 등록된 앱과 게임은 개발자들이 제공하고 판매하는 것이며, 플래이스토어는 개발자가 아닌 등록된 상품 정보 및 거래에 대한 어떠한 책임도 지지 않습니다.
					</div>
				</footer>
		</div>
		<script type="text/javascript">//dom tree 가 생성된 이후에 동작

		window.addEventListener('load',function(){//이거 왜 하는 건가요? 바로 eventClick 하면 어떻게 되나요?
			
			if(document.body.width)eventClick();


		},false);
		function eventClick() {
			var elButton=document.getElementById('buttonOnNavTitle'); 
			var elSection=document.getElementById('onNavTitle');
			var bodyarea = document.body;


			bodyarea.addEventListener('click',function(e){
				if(elSection.style.display=="block"){//장르 부분
					if(e.target.offsetParent==elSection){
						changeBooks(e.target);
					}
					elSection.style.display="none";
					console.log("a");

				}
				if(e.target.id=="moreButton1"){//더보기 부분
					e.target.style.display="none";
					showMoreBooks();
					fixArticle();

				}
				
			},false)//근데 여기 false는 뭔가요??

			elButton.addEventListener('click',function(e){//장르 부분 
				if(elSection.style.display=="block"){
					elSection.style.display="none";
				}
				else{
					elSection.style.display="block";
									}
				e.stopPropagation();//버블링 없애는거 :event걸린 거가 가장 위에있는것만 실행하고 싶을때
			},false)
		}
		function fixArticle(){
			var elSection=document.getElementById('books1');
			elSection.style.height="initial";

		}
		function changeBooks(targetLi){
			var BookList;
			var loadingPage=document.getElementById('loading');
			loadingPage.style.display="block";
			var url="./BookLists/aBookList.js";
			var request = new XMLHttpRequest();
			request.open("GET" , url , true);
			request.send(null);
			  
			request.onreadystatechange = function() { 
			    if(request.readyState === 4 && request.status === 200) {
			      	BookList = request.responseText;
			      	BookList = JSON.parse(BookList);
			      	var result= makeBookElement(sBookTemplate,BookList[targetLi.id]);
			      	replaceBooks(result);
			      	loadingPage.style.display="none";
				}
			}
		}
		var sBookTemplate = "<div class='up'><a href='' class='black'></a><div><img src=%imgsrc---% alt=''></div></div><div class='down'><h2><a href=''class='line'>%title---%</a></h2><span><a href='' class='left line'>%name---%</a><a href=''  class='right line'>%money---%</a></span></div>";
		var sBookTemplateMore = "<li><div class='up'><a href='' class='black'></a><div><img src=%imgsrc---% alt=''></div></div><div class='down'><h2><a href=''class='line'>%title---%</a></h2><span><a href='' class='left line'>%name---%</a><a href=''  class='right line'>%money---%</a></span></div></li>";

		function makeBookElement(sBookTemplate, aBookList){
			var result=new Array(aBookList.length);
			aBookList.forEach(function(v,i,o){
				result[i]=sBookTemplate.replace("%imgsrc---%",v.imgsrc).replace("%title---%",v.titleName).replace("%name---%",v.name).replace("%money---%",v.money);
			});
			return result;
		}
		function replaceBooks(aNewBooks){
			eChildren=document.getElementById("books1").children;
			aNewBooks.forEach(function(v,i,o){
				eChildren[i].innerHTML = v;
			})
		}
		function showMoreBooks(){
			var morebooks=document.getElementById("line1");//line1 만 살리고 나머진 죽이기
			var bookSelves=document.getElementById("bookSelf");//article 의 책부분들
			var loadingPage=document.getElementById('loading');
			loadingPage.style.display="block";
			var moreBookList;
			var url="./BookLists/moreBooks1.js";
			var request = new XMLHttpRequest();
			request.open("GET" , url , true);
			request.send(null);
			  
			request.onreadystatechange = function() { 
			    if(request.readyState === 4 && request.status === 200) {
			      	BookList = request.responseText;
			      	BookList = JSON.parse(BookList);
			      	var result= makeBookElement(sBookTemplateMore,BookList);
			      	putBooks(result);
			      	morebooks.insertAdjacentHTML('beforeend', result);
			      	loadingPage.style.display="none";
				}
			}
			bookSelves.innerHTML=morebooks.innerHTML;
		}
		function putBooks (result) {
			elBooks=document.getElementById("books1");
			result.forEach(function(v,i,o){
				elBooks.insertAdjacentHTML ('beforeend',v);
			})
		}
		
		</script>
		<script src="./mobile.js"></script>
	</body>
</html>